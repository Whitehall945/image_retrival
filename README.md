# å›¾åƒæ£€ç´¢ç³»ç»Ÿ

åŸºäºCLIP+FAISSçš„é«˜æ•ˆå›¾åƒæ£€ç´¢ç³»ç»Ÿï¼Œæ”¯æŒä»¥å›¾æœå›¾å’Œæ–‡æœ¬æœç´¢åŠŸèƒ½ã€‚

## ğŸŒŸ ç‰¹æ€§

- **ä»¥å›¾æœå›¾**ï¼šä¸Šä¼ å›¾ç‰‡æŸ¥æ‰¾è§†è§‰ç›¸ä¼¼çš„å›¾åƒ
- **æ–‡æœ¬æœç´¢**ï¼šé€šè¿‡è‡ªç„¶è¯­è¨€æè¿°æ£€ç´¢å›¾åƒï¼ˆCLIPè·¨æ¨¡æ€èƒ½åŠ›ï¼‰
- **é«˜æ•ˆæ£€ç´¢**ï¼šFAISSå‘é‡ç´¢å¼•ï¼Œæ¯«ç§’çº§å“åº”
- **GPUåŠ é€Ÿ**ï¼šæ”¯æŒCUDAåŠ é€Ÿçš„ç‰¹å¾æå–å’Œæ£€ç´¢
- **å‹å¥½ç•Œé¢**ï¼šGradio Webç•Œé¢ï¼Œå¼€ç®±å³ç”¨

## ğŸ”§ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Query Image   â”‚â”€â”€â”€â”€â–¶â”‚  CLIP Encoder    â”‚â”€â”€â”€â”€â–¶â”‚  FAISS Index    â”‚
â”‚   or Text       â”‚     â”‚  (ViT-B/32)      â”‚     â”‚  (Flat/IVF)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                          â”‚
                                                          â–¼
                                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                 â”‚  Top-K Results  â”‚
                                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ å®‰è£…

### 1. åˆ›å»ºCondaç¯å¢ƒ

```bash
cd /home/henglong/info_retrival_project
conda env create -f environment.yml
conda activate image_retrieval
```

### 2. ä¸‹è½½æ•°æ®é›†

```bash
python scripts/download_dataset.py --dataset cifar10 --max-images 60000
```

### 3. æ„å»ºç´¢å¼•

```bash
python scripts/build_index.py --dataset cifar10 --index-type Flat
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¯åŠ¨Webç•Œé¢

```bash
conda activate image_retrieval
python src/app.py
```

è®¿é—® http://localhost:7860 ä½¿ç”¨Webç•Œé¢ã€‚

### å‘½ä»¤è¡Œè¯„ä¼°

```bash
python scripts/evaluate.py --num-queries 500
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
info_retrival_project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config.py           # å…¨å±€é…ç½®
â”‚   â”œâ”€â”€ dataset.py          # æ•°æ®é›†ç®¡ç†
â”‚   â”œâ”€â”€ feature_extractor.py # CLIPç‰¹å¾æå–
â”‚   â”œâ”€â”€ indexer.py          # FAISSç´¢å¼•
â”‚   â”œâ”€â”€ retrieval_engine.py # æ£€ç´¢å¼•æ“
â”‚   â””â”€â”€ app.py              # Webç•Œé¢
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ download_dataset.py # æ•°æ®ä¸‹è½½
â”‚   â”œâ”€â”€ build_index.py      # ç´¢å¼•æ„å»º
â”‚   â””â”€â”€ evaluate.py         # æ€§èƒ½è¯„ä¼°
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_retrieval.py   # å•å…ƒæµ‹è¯•
â”œâ”€â”€ data/                   # æ•°æ®ç›®å½• (gitignored)
â”œâ”€â”€ environment.yml         # Condaç¯å¢ƒ
â””â”€â”€ README.md
```

## ğŸ”¬ æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | CIFAR-10 |
|------|----------|
| mAP@10 | ~0.85 |
| æŸ¥è¯¢å»¶è¿Ÿ | <50ms |
| ç´¢å¼•æ„å»º | ~5åˆ†é’Ÿ |

## ğŸ“„ è®¸å¯è¯

MIT License
